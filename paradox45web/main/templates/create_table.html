{% extends "base.html" %}
{% block content %}
<h1>{% if edit %}Edit Table{% else %}Create Table{% endif %}</h1>
<form method="post">
    {% csrf_token %}
    <label>Table Name:</label>
    <input type="text" name="table_name" required value="{% if edit %}{{ edit_name }}{% endif %}"><br><br>
    {% if edit %}
        <input type="hidden" name="edit_original" value="{{ edit_name }}">
    {% endif %}
    <table>
        <tr>
            <th>Field Name</th>
            <th>Data Type</th>
        </tr>
        {% comment %} Iterate over prefill_rows (length 10) and use forloop.counter for field indices {% endcomment %}
        {% for row in prefill_rows %}
        <tr>
            <td><input type="text" name="field_name_{{ forloop.counter }}" value="{{ row.name }}"></td>
            <td>
                <select name="field_type_{{ forloop.counter }}">
                    <option value="">---</option>
                    <option value="INTEGER" {% if row.type == 'INTEGER' %}selected{% endif %}>INTEGER</option>
                    <option value="TEXT" {% if row.type == 'TEXT' %}selected{% endif %}>TEXT</option>
                    <option value="REAL" {% if row.type == 'REAL' %}selected{% endif %}>REAL</option>
                    <option value="BLOB" {% if row.type == 'BLOB' %}selected{% endif %}>BLOB</option>
                </select>
            </td>
        </tr>
        {% endfor %}
    </table>
    <br>
    <button type="submit">{% if edit %}Save Changes{% else %}Create Table{% endif %}</button>
</form>
{% if msg %}
<p style="color:yellow;">{{ msg }}</p>
{% endif %}
{% endblock %}