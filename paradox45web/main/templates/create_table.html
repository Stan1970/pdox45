{% extends "base.html" %}
{% block content %}
<h1>{% if edit %}Edit Table{% else %}Create Table{% endif %}</h1>
<form method="post">
    {% csrf_token %}
    <label>Table Name:</label>
    <input type="text" name="table_name" required value="{% if edit %}{{ edit_name }}{% endif %}"><br><br>
    {% if edit %}
        <input type="hidden" name="edit_original" value="{{ edit_name }}">
    {% endif %}
    <table>
        <tr>
            <th>Field Name</th>
            <th>Data Type</th>
        </tr>
        {% for i in range %}
        <tr>
            <td><input type="text" name="field_name_{{i}}" value="{% if prefill_rows and prefill_rows|length >= i %}{% if prefill_rows|length >= i %}{{ prefill_rows[i-1].name }}{% endif %}{% endif %}"></td>
            <td>
                <select name="field_type_{{i}}">
                    <option value="">---</option>
                    <option value="INTEGER" {% if prefill_rows and prefill_rows|length >= i and prefill_rows[i-1].type == 'INTEGER' %}selected{% endif %}>INTEGER</option>
                    <option value="TEXT" {% if prefill_rows and prefill_rows|length >= i and prefill_rows[i-1].type == 'TEXT' %}selected{% endif %}>TEXT</option>
                    <option value="REAL" {% if prefill_rows and prefill_rows|length >= i and prefill_rows[i-1].type == 'REAL' %}selected{% endif %}>REAL</option>
                    <option value="BLOB" {% if prefill_rows and prefill_rows|length >= i and prefill_rows[i-1].type == 'BLOB' %}selected{% endif %}>BLOB</option>
                </select>
            </td>
        </tr>
        {% endfor %}
    </table>
    <br>
    <button type="submit">{% if edit %}Save Changes{% else %}Create Table{% endif %}</button>
</form>
{% if msg %}
<p style="color:yellow;">{{ msg }}</p>
{% endif %}
{% endblock %}